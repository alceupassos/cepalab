(()=>{var e={};e.id=7521,e.ids=[7521],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},48381:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),a(30593),a(85344),a(11506),a(35866);var s=a(23191),r=a(88716),l=a(37922),i=a.n(l),n=a(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let o=["",{children:["cepalab",{children:["vendas",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,30593)),"/Users/alceualvespasssosmac/cepalab/app/cepalab/vendas/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,85344)),"/Users/alceualvespasssosmac/cepalab/app/cepalab/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"/Users/alceualvespasssosmac/cepalab/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/alceualvespasssosmac/cepalab/app/cepalab/vendas/page.tsx"],x="/cepalab/vendas/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/cepalab/vendas/page",pathname:"/cepalab/vendas",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},85194:(e,t,a)=>{Promise.resolve().then(a.bind(a,26309))},26309:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(10326),r=a(17577),l=a(30058),i=a(88129),n=a(71821),d=a(17069),o=a(24061),c=a(48705),x=a(41137),p=a(21405),m=a(31540),u=a(9920),h=a(45421),g=a(86459),v=a(58399);let b=e=>fetch(e).then(e=>e.json());function y(){let[e,t]=(0,r.useState)({dateRange:{start:new Date(Date.now()-2592e6).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]},status:"all"}),[a,y]=(0,r.useState)(!1),[k,j]=(0,r.useState)(!1),w=new URLSearchParams(e).toString(),{data:f,error:N,mutate:_}=(0,v.ZP)(`/api/cepalab/vendas${w?`?${w}`:""}`,b,{refreshInterval:k?3e4:0}),{data:P}=(0,v.ZP)("/api/cepalab/vendas/summary",b),S=e=>{if(!f)return;let t=f.map(e=>({"N\xfamero da Venda":e.numero_venda,Data:new Date(e.data_venda).toLocaleDateString("pt-BR"),Cliente:e.cliente_nome,Vendedor:e.vendedor_nome,"Valor Total":e.valor_total,Status:e.status,"Forma de Pagamento":e.forma_pagamento,Parcelas:e.parcelas}));g.$.export(t,e,"vendas_report")},C=e=>{switch(e.toLowerCase()){case"conclu\xedda":case"finalizada":return"success";case"pendente":return"warning";case"cancelada":return"danger";default:return"default"}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Gest\xe3o de Vendas"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Acompanhe e gerencie suas vendas com filtros avan\xe7ados e an\xe1lises em tempo real"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(h.lE,{icon:s.jsx(n.Z,{className:"w-6 h-6"}),title:"Total de Vendas",value:P?.total_vendas||0,subtitle:"no per\xedodo",change:{value:12.5,trend:"up"},variant:"info",loading:!P,children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quantidade de vendas"})}),s.jsx(h.lE,{icon:s.jsx(d.Z,{className:"w-6 h-6"}),title:"Valor Total",value:`R$ ${(P?.total_valor||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,subtitle:"soma no per\xedodo",change:{value:8.3,trend:"up"},variant:"success",loading:!P,children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receita total"})}),s.jsx(h.lE,{icon:s.jsx(o.Z,{className:"w-6 h-6"}),title:"Clientes Atendidos",value:P?.total_clientes||0,subtitle:"no per\xedodo",change:{value:5.2,trend:"up"},variant:"info",loading:!P,children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Atendimento realizado"})}),s.jsx(h.lE,{icon:s.jsx(c.Z,{className:"w-6 h-6"}),title:"Ticket M\xe9dio",value:`R$ ${(P?.media_valor||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,subtitle:"por venda",change:{value:-2.1,trend:"down"},variant:"warning",loading:!P,children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor m\xe9dio por pedido"})})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)("button",{onClick:()=>y(!a),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[s.jsx(x.Z,{className:"w-4 h-4"}),"Filtros"]}),(0,s.jsxs)("button",{onClick:()=>_(),className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:[s.jsx(p.Z,{className:"w-4 h-4"}),"Atualizar"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"autoRefresh",checked:k,onChange:e=>j(e.target.checked),className:"rounded border-slate-300"}),s.jsx("label",{htmlFor:"autoRefresh",className:"text-sm text-slate-600 dark:text-slate-300",children:"Atualiza\xe7\xe3o autom\xe1tica (30s)"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>S("csv"),className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[s.jsx(m.Z,{className:"w-4 h-4"}),"CSV"]}),(0,s.jsxs)("button",{onClick:()=>S("excel"),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[s.jsx(m.Z,{className:"w-4 h-4"}),"Excel"]}),(0,s.jsxs)("button",{onClick:()=>S("pdf"),className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[s.jsx(m.Z,{className:"w-4 h-4"}),"PDF"]})]})]}),s.jsx(i.M,{children:a&&s.jsx(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"mt-6",children:s.jsx(u.u,{onFilterChange:a=>t({...e,...a,status:a.status??"all"}),initialFilters:e})})})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Vendas Recentes"})}),N&&(0,s.jsxs)("div",{className:"p-6 text-center text-red-600 dark:text-red-400",children:["Erro ao carregar vendas: ",N.message]}),!f&&!N&&s.jsx("div",{className:"p-6 text-center text-slate-500 dark:text-slate-400",children:"Carregando vendas..."}),f&&s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"N\xfamero"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Data"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Vendedor"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Valor Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Pagamento"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:f.map((e,t)=>(0,s.jsxs)(l.E.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-white",children:e.numero_venda}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(e.data_venda).toLocaleDateString("pt-BR")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:e.cliente_nome}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:e.vendedor_nome}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-white",children:["R$ ",e.valor_total.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"success"===C(e.status)?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"warning"===C(e.status)?"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100":"danger"===C(e.status)?"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-100"}`,children:e.status})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[e.forma_pagamento," ",e.parcelas>1&&`(${e.parcelas}x)`]})]},e.id))})]})})]})]})})}},86459:(e,t,a)=>{"use strict";a.d(t,{$:()=>s});class s{static export(e,t,a){switch(t){case"csv":default:r.toCSV(e,a);break;case"json":r.toJSON(e,a);break;case"pdf":r.toPDF(e,a);break;case"excel":r.toExcel(e,a)}}static exportData(e,t){this.export(e,t.format,t.filename.replace(/\.[^/.]+$/,""))}static prepareSalesData(e,t){return e?.monthlyData?.map(e=>({Mês:e.month,Vendas:e.sales,Pedidos:e.orders,Ticket_Médio:e.avgTicket}))||[]}static prepareStockData(e){return e?.summary?[{Categoria:"Total Dispon\xedvel",Valor:e.summary.total_disponivel},{Categoria:"Produtos",Valor:e.summary.produtos},{Categoria:"Valor Total",Valor:e.summary.valor_total}]:[]}static prepareFinancialData(e){return e?.overdue?[{Tipo:"Contas Vencidas",Valor:e.overdue.total,Quantidade:e.overdue.qtd},{Tipo:"Contas a Pagar",Valor:e.payable?.total||0,Quantidade:e.payable?.qtd||0},{Tipo:"Contas a Receber",Valor:e.receivable?.total||0,Quantidade:e.receivable?.qtd||0}]:[]}}class r{static toCSV(e,t){if(!e||0===e.length)return;let a=new Blob([[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=`${t}.csv`,r.click(),URL.revokeObjectURL(s)}static toJSON(e,t){let a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=`${t}.json`,r.click(),URL.revokeObjectURL(s)}static toPDF(e,t){console.warn("PDF export not implemented yet, falling back to CSV"),this.toCSV(e,t)}static toExcel(e,t){console.warn("Excel export not implemented yet, falling back to CSV"),this.toCSV(e,t)}}},941:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},48705:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},17069:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},24061:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},94019:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},30593:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/alceualvespasssosmac/cepalab/app/cepalab/vendas/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[9276,4471,5406,9105,8455,2282,7935,9920],()=>a(48381));module.exports=s})();