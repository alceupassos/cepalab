(()=>{var e={};e.id=6242,e.ids=[6242],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8770:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),a(15309),a(24826),a(11506),a(35866);var s=a(23191),r=a(88716),l=a(37922),i=a.n(l),o=a(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);a.d(t,n);let d=["",{children:["cepalab",{children:["estoque",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,15309)),"/Users/alceualvespasssosmac/cepalab/app/cepalab/estoque/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,24826)),"/Users/alceualvespasssosmac/cepalab/app/cepalab/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"/Users/alceualvespasssosmac/cepalab/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/alceualvespasssosmac/cepalab/app/cepalab/estoque/page.tsx"],x="/cepalab/estoque/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/cepalab/estoque/page",pathname:"/cepalab/estoque",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},77569:(e,t,a)=>{Promise.resolve().then(a.bind(a,33775))},33775:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(10326),r=a(17577),l=a(30058),i=a(88129),o=a(29163),n=a(50949),d=a(49163),c=a(48705),x=a(71821),m=a(41137),u=a(21405),p=a(31540),h=a(33545),g=a(45421),b=a(86459),j=a(58399);let v=e=>fetch(e).then(e=>e.json());function f(){let[e,t]=(0,r.useState)({}),[a,f]=(0,r.useState)(!1),[k,N]=(0,r.useState)(!1),[w,y]=(0,r.useState)([]),q=new URLSearchParams(e).toString(),{data:_,error:P,mutate:E}=(0,j.ZP)(`/api/cepalab/estoque${q?`?${q}`:""}`,v,{refreshInterval:k?3e4:0}),{data:C}=(0,j.ZP)("/api/cepalab/estoque/summary",v),Z=e=>{if(!_)return;let t=_.map(e=>({Código:e.codigo_produto,Produto:e.nome_produto,Categoria:e.categoria,Fornecedor:e.fornecedor,"Qtd. Atual":e.quantidade_atual,"Qtd. M\xednima":e.quantidade_minima,"Qtd. M\xe1xima":e.quantidade_maxima,"Valor Unit.":e.valor_unitario,"Valor Total":e.valor_total,Localização:e.localizacao,"\xdalt. Mov.":new Date(e.ultima_movimentacao).toLocaleDateString("pt-BR"),Status:e.status}));b.$.export(t,e,"estoque_report")},S=e=>{switch(e){case"low-stock":return s.jsx(o.Z,{className:"w-4 h-4 text-warning"});case"out-of-stock":return s.jsx(n.Z,{className:"w-4 h-4 text-danger"});case"overstock":return s.jsx(d.Z,{className:"w-4 h-4 text-info"});default:return s.jsx(c.Z,{className:"w-4 h-4 text-success"})}},D=e=>{y(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Controle de Estoque"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Gerencie seu invent\xe1rio com an\xe1lises detalhadas e alertas inteligentes"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(g.lE,{icon:s.jsx(c.Z,{className:"w-6 h-6"}),title:"Total de Produtos",value:C?.total_produtos||0,subtitle:"em estoque",change:{value:5.2,trend:"up"},variant:"info",loading:!C,children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de produtos cadastrados"})}),s.jsx(g.lE,{icon:s.jsx(x.Z,{className:"w-6 h-6"}),title:"Valor Total do Estoque",value:`R$ ${(C?.valor_total||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,subtitle:"valor total em estoque",change:{value:3.8,trend:"up"},variant:"success",loading:!C,children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor total do invent\xe1rio"})}),s.jsx(g.lE,{icon:s.jsx(o.Z,{className:"w-6 h-6"}),title:"Baixo Estoque",value:C?.produtos_baixo_estoque||0,subtitle:"produtos com estoque baixo",change:{value:-12.5,trend:"down"},variant:"warning",loading:!C,glow:C?.produtos_baixo_estoque>0,children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Requer aten\xe7\xe3o para reposi\xe7\xe3o"})}),s.jsx(g.lE,{icon:s.jsx(n.Z,{className:"w-6 h-6"}),title:"Sem Estoque",value:C?.produtos_sem_estoque||0,subtitle:"produtos em falta",change:{value:C?.produtos_sem_estoque>0?-25:0,trend:"down"},variant:"danger",loading:!C,glow:C?.produtos_sem_estoque>0,children:s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Urgente: requer reposi\xe7\xe3o imediata"})})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)("button",{onClick:()=>f(!a),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[s.jsx(m.Z,{className:"w-4 h-4"}),"Filtros"]}),(0,s.jsxs)("button",{onClick:()=>E(),className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:[s.jsx(u.Z,{className:"w-4 h-4"}),"Atualizar"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"autoRefresh",checked:k,onChange:e=>N(e.target.checked),className:"rounded border-slate-300"}),s.jsx("label",{htmlFor:"autoRefresh",className:"text-sm text-slate-600 dark:text-slate-300",children:"Atualiza\xe7\xe3o autom\xe1tica (30s)"})]}),w.length>0&&s.jsx("div",{className:"flex items-center gap-2 px-3 py-2 bg-info-100 dark:bg-info-900 text-info-800 dark:text-info-200 rounded-lg",children:(0,s.jsxs)("span",{className:"text-sm font-medium",children:[w.length," selecionado(s)"]})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>Z("csv"),className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[s.jsx(p.Z,{className:"w-4 h-4"}),"CSV"]}),(0,s.jsxs)("button",{onClick:()=>Z("excel"),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[s.jsx(p.Z,{className:"w-4 h-4"}),"Excel"]}),(0,s.jsxs)("button",{onClick:()=>Z("pdf"),className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[s.jsx(p.Z,{className:"w-4 h-4"}),"PDF"]})]})]}),s.jsx(i.M,{children:a&&s.jsx(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"mt-6",children:s.jsx(h.w,{onFilterChange:t,initialFilters:e})})})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Produtos em Estoque"})}),P&&(0,s.jsxs)("div",{className:"p-6 text-center text-red-600 dark:text-red-400",children:["Erro ao carregar estoque: ",P.message]}),!_&&!P&&s.jsx("div",{className:"p-6 text-center text-slate-500 dark:text-slate-400",children:"Carregando estoque..."}),_&&s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map((e,t)=>(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:`border rounded-lg p-4 transition-all duration-200 ${w.includes(e.id)?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,onClick:()=>D(e.id),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[S(e.status),s.jsx("span",{className:`text-sm font-medium ${"low-stock"===e.status?"text-warning":"out-of-stock"===e.status?"text-danger":"overstock"===e.status?"text-info":"text-success"}`,children:e.codigo_produto})]}),s.jsx("input",{type:"checkbox",checked:w.includes(e.id),onChange:()=>D(e.id),className:"rounded border-slate-300",onClick:e=>e.stopPropagation()})]}),s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:e.nome_produto}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Categoria:"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:e.categoria})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Fornecedor:"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:e.fornecedor})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Localiza\xe7\xe3o:"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:e.localizacao})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Quantidade:"}),(0,s.jsxs)("span",{className:`font-medium ${"out-of-stock"===e.status?"text-danger":"low-stock"===e.status?"text-warning":"text-success"}`,children:[e.quantidade_atual," un"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Valor Unit\xe1rio:"}),(0,s.jsxs)("span",{className:"text-slate-900 dark:text-white",children:["R$ ",e.valor_unitario.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Valor Total:"}),(0,s.jsxs)("span",{className:"font-medium text-slate-900 dark:text-white",children:["R$ ",e.valor_total.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),s.jsx("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-700",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"\xdaltima movimenta\xe7\xe3o:"}),s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:new Date(e.ultima_movimentacao).toLocaleDateString("pt-BR")})]})}),"normal"!==e.status&&(0,s.jsxs)("div",{className:`mt-3 p-2 rounded-lg text-xs font-medium ${"low-stock"===e.status?"bg-warning-100 text-warning-800 dark:bg-warning-900 dark:text-warning-200":"out-of-stock"===e.status?"bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-200":"bg-info-100 text-info-800 dark:bg-info-900 dark:text-info-200"}`,children:["low-stock"===e.status&&"⚠️ Estoque abaixo do m\xednimo","out-of-stock"===e.status&&"\uD83D\uDEA8 Produto sem estoque","overstock"===e.status&&"\uD83D\uDCE6 Excesso de estoque"]})]},e.id))})})]})]})})}},50949:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},94019:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},15309:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/alceualvespasssosmac/cepalab/app/cepalab/estoque/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[9276,4471,6944,9105,8455,2282,9315,541],()=>a(8770));module.exports=s})();