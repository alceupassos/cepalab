(()=>{var e={};e.id=993,e.ids=[993],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},9714:e=>{"use strict";e.exports=require("constants")},84770:e=>{"use strict";e.exports=require("crypto")},18139:e=>{"use strict";e.exports=require("dgram")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},95346:e=>{"use strict";e.exports=require("timers")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6005:e=>{"use strict";e.exports=require("node:crypto")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},70612:e=>{"use strict";e.exports=require("node:os")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},87529:()=>{},28462:(e,r,t)=>{"use strict";t.r(r),t.d(r,{originalPathname:()=>_,patchFetch:()=>R,requestAsyncStorage:()=>x,routeModule:()=>S,serverHooks:()=>m,staticGenerationAsyncStorage:()=>v});var s={};t.r(s),t.d(s,{GET:()=>l,dynamic:()=>q,runtime:()=>d});var o=t(49303),i=t(88716),u=t(60670),c=t(87070),a=t(59924),n=t.n(a),p=t(94005);let d="nodejs",q="force-dynamic";async function l(){try{let e=function(){let e=process.env.MSSQL_SERVER,r=process.env.MSSQL_PORT?Number(process.env.MSSQL_PORT):void 0,t=process.env.MSSQL_DATABASE,s=process.env.MSSQL_USER,o=process.env.MSSQL_PASSWORD;return e&&r&&t&&s&&o?{server:e,port:r,database:t,user:s,password:o}:(0,p.k)()||null}();if(!e)return c.NextResponse.json({error:"Credenciais MSSQL n\xe3o configuradas"},{status:400});let r={server:e.server,port:Number(e.port),user:e.user,password:e.password,database:e.database,options:{encrypt:!1,trustServerCertificate:!0},connectionTimeout:15e3,requestTimeout:2e4,pool:{max:5,min:0,idleTimeoutMillis:3e4}},t=await n().connect(r),s=await t.request().query(`SELECT COUNT(*) AS produtos,
              SUM(qtd_fisica) AS total_fisico,
              SUM(qtd_reservada) AS total_reservado,
              SUM(qtd_disponivel) AS total_disponivel
       FROM v_estoque WITH (NOLOCK)`),o=await t.request().query(`SELECT TOP 50 prod_codigo, qtd_fisica, qtd_reservada, qtd_disponivel
       FROM v_estoque WITH (NOLOCK)
       WHERE qtd_disponivel < 0
       ORDER BY qtd_disponivel ASC`),i=await t.request().query(`SELECT TOP 50 prod_codigo, qtd_fisica, qtd_reservada, qtd_disponivel
       FROM v_estoque WITH (NOLOCK)
       ORDER BY qtd_disponivel DESC`);return await t.close(),c.NextResponse.json({summary:s.recordset?.[0]||{},negatives:o.recordset,byProduct:i.recordset})}catch(e){return c.NextResponse.json({error:e?.message??String(e)},{status:500})}}let S=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/cepalab/stock/route",pathname:"/api/cepalab/stock",filename:"route",bundlePath:"app/api/cepalab/stock/route"},resolvedPagePath:"/Users/alceualvespasssosmac/cepalab/app/api/cepalab/stock/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:v,serverHooks:m}=S,_="/api/cepalab/stock/route";function R(){return(0,u.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:v})}},94005:(e,r,t)=>{"use strict";t.d(r,{k:()=>c});var s=t(92048),o=t.n(s),i=t(55315),u=t.n(i);function c(){for(let e of[u().join(process.cwd(),"docs","conexao-sql-sgc-md.md"),u().join(process.cwd(),"docs","conex\xe3o-sql-sgc-md.md"),u().join(process.cwd(),"docs","conexao-sql-sgc.md"),u().join(process.cwd(),"docs","Conexao_SQL_Server_Gerador.md")])try{if(!o().existsSync(e))continue;let r=o().readFileSync(e,"utf-8").split(/\r?\n/),t=e=>{let t=RegExp(`${e}s*[:=]s*(.+)`,"i"),s=r.find(e=>t.test(e));return s?s.match(t)[1].trim():void 0},s=t("Servidor")||t("MSSQL_SERVER"),i=t("Porta")||t("MSSQL_PORT"),u=t("Database")||t("MSSQL_DATABASE"),c=t("Usu\xe1rio")||t("MSSQL_USER"),a=t("Senha")||t("MSSQL_PASSWORD");if(s&&i&&u&&c)return{server:s,port:Number(i),database:u,user:c,password:a}}catch{}return null}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9276,5972,9924],()=>t(28462));module.exports=s})();