(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{56861:function(e,t,a){Promise.resolve().then(a.bind(a,26151))},26151:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(57437),l=a(2265),r=a(40521),i=a(48614),o=a(3085),n=a(76865),d=a(28124),c=a(44794),x=a(95252),m=a(90740),u=a(82431),h=a(92735),g=a(69240),p=a(94583),j=a(82472),b=a(77086);let f=e=>fetch(e).then(e=>e.json());function v(){let[e,t]=(0,l.useState)({}),[a,v]=(0,l.useState)(!1),[k,N]=(0,l.useState)(!1),[w,y]=(0,l.useState)([]),_=new URLSearchParams(e).toString(),{data:q,error:E,mutate:C}=(0,b.ZP)("/api/cepalab/estoque".concat(_?"?".concat(_):""),f,{refreshInterval:k?3e4:0}),{data:Z}=(0,b.ZP)("/api/cepalab/estoque/summary",f);(0,l.useEffect)(()=>{C()},[e,C]);let D=e=>{if(!q)return;let t=q.map(e=>({Código:e.codigo_produto,Produto:e.nome_produto,Categoria:e.categoria,Fornecedor:e.fornecedor,"Qtd. Atual":e.quantidade_atual,"Qtd. M\xednima":e.quantidade_minima,"Qtd. M\xe1xima":e.quantidade_maxima,"Valor Unit.":e.valor_unitario,"Valor Total":e.valor_total,Localização:e.localizacao,"\xdalt. Mov.":new Date(e.ultima_movimentacao).toLocaleDateString("pt-BR"),Status:e.status}));j.$.export(t,e,"estoque_report")},S=e=>{switch(e){case"low-stock":return(0,s.jsx)(o.Z,{className:"w-4 h-4 text-warning"});case"out-of-stock":return(0,s.jsx)(n.Z,{className:"w-4 h-4 text-danger"});case"overstock":return(0,s.jsx)(d.Z,{className:"w-4 h-4 text-info"});default:return(0,s.jsx)(c.Z,{className:"w-4 h-4 text-success"})}},R=e=>{y(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Controle de Estoque"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Gerencie seu invent\xe1rio com an\xe1lises detalhadas e alertas inteligentes"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)(p.lE,{icon:(0,s.jsx)(c.Z,{className:"w-6 h-6"}),title:"Total de Produtos",value:(null==Z?void 0:Z.total_produtos)||0,subtitle:"em estoque",change:{value:5.2,trend:"up"},variant:"info",loading:!Z,children:(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de produtos cadastrados"})}),(0,s.jsx)(p.lE,{icon:(0,s.jsx)(x.Z,{className:"w-6 h-6"}),title:"Valor Total do Estoque",value:"R$ ".concat(((null==Z?void 0:Z.valor_total)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})),subtitle:"valor total em estoque",change:{value:3.8,trend:"up"},variant:"success",loading:!Z,children:(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor total do invent\xe1rio"})}),(0,s.jsx)(p.lE,{icon:(0,s.jsx)(o.Z,{className:"w-6 h-6"}),title:"Baixo Estoque",value:(null==Z?void 0:Z.produtos_baixo_estoque)||0,subtitle:"produtos com estoque baixo",change:{value:-12.5,trend:"down"},variant:"warning",loading:!Z,glow:(null==Z?void 0:Z.produtos_baixo_estoque)>0,children:(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Requer aten\xe7\xe3o para reposi\xe7\xe3o"})}),(0,s.jsx)(p.lE,{icon:(0,s.jsx)(n.Z,{className:"w-6 h-6"}),title:"Sem Estoque",value:(null==Z?void 0:Z.produtos_sem_estoque)||0,subtitle:"produtos em falta",change:{value:(null==Z?void 0:Z.produtos_sem_estoque)>0?-25:0,trend:"down"},variant:"danger",loading:!Z,glow:(null==Z?void 0:Z.produtos_sem_estoque)>0,children:(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Urgente: requer reposi\xe7\xe3o imediata"})})]}),(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)("button",{onClick:()=>v(!a),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4"}),"Filtros"]}),(0,s.jsxs)("button",{onClick:()=>C(),className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),"Atualizar"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"autoRefresh",checked:k,onChange:e=>N(e.target.checked),className:"rounded border-slate-300"}),(0,s.jsx)("label",{htmlFor:"autoRefresh",className:"text-sm text-slate-600 dark:text-slate-300",children:"Atualiza\xe7\xe3o autom\xe1tica (30s)"})]}),w.length>0&&(0,s.jsx)("div",{className:"flex items-center gap-2 px-3 py-2 bg-info-100 dark:bg-info-900 text-info-800 dark:text-info-200 rounded-lg",children:(0,s.jsxs)("span",{className:"text-sm font-medium",children:[w.length," selecionado(s)"]})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>D("csv"),className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),"CSV"]}),(0,s.jsxs)("button",{onClick:()=>D("excel"),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),"Excel"]}),(0,s.jsxs)("button",{onClick:()=>D("pdf"),className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),"PDF"]})]})]}),(0,s.jsx)(i.M,{children:a&&(0,s.jsx)(r.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"mt-6",children:(0,s.jsx)(g.w,{onFilterChange:t,initialFilters:e})})})]}),(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Produtos em Estoque"})}),E&&(0,s.jsxs)("div",{className:"p-6 text-center text-red-600 dark:text-red-400",children:["Erro ao carregar estoque: ",E.message]}),!q&&!E&&(0,s.jsx)("div",{className:"p-6 text-center text-slate-500 dark:text-slate-400",children:"Carregando estoque..."}),q&&(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map((e,t)=>(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"border rounded-lg p-4 transition-all duration-200 ".concat(w.includes(e.id)?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"),onClick:()=>R(e.id),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[S(e.status),(0,s.jsx)("span",{className:"text-sm font-medium ".concat("low-stock"===e.status?"text-warning":"out-of-stock"===e.status?"text-danger":"overstock"===e.status?"text-info":"text-success"),children:e.codigo_produto})]}),(0,s.jsx)("input",{type:"checkbox",checked:w.includes(e.id),onChange:()=>R(e.id),className:"rounded border-slate-300",onClick:e=>e.stopPropagation()})]}),(0,s.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:e.nome_produto}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600 dark:text-slate-300",children:"Categoria:"}),(0,s.jsx)("span",{className:"text-slate-900 dark:text-white",children:e.categoria})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600 dark:text-slate-300",children:"Fornecedor:"}),(0,s.jsx)("span",{className:"text-slate-900 dark:text-white",children:e.fornecedor})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600 dark:text-slate-300",children:"Localiza\xe7\xe3o:"}),(0,s.jsx)("span",{className:"text-slate-900 dark:text-white",children:e.localizacao})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600 dark:text-slate-300",children:"Quantidade:"}),(0,s.jsxs)("span",{className:"font-medium ".concat("out-of-stock"===e.status?"text-danger":"low-stock"===e.status?"text-warning":"text-success"),children:[e.quantidade_atual," un"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600 dark:text-slate-300",children:"Valor Unit\xe1rio:"}),(0,s.jsxs)("span",{className:"text-slate-900 dark:text-white",children:["R$ ",e.valor_unitario.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-slate-600 dark:text-slate-300",children:"Valor Total:"}),(0,s.jsxs)("span",{className:"font-medium text-slate-900 dark:text-white",children:["R$ ",e.valor_total.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),(0,s.jsx)("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-700",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"\xdaltima movimenta\xe7\xe3o:"}),(0,s.jsx)("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:new Date(e.ultima_movimentacao).toLocaleDateString("pt-BR")})]})}),"normal"!==e.status&&(0,s.jsxs)("div",{className:"mt-3 p-2 rounded-lg text-xs font-medium ".concat("low-stock"===e.status?"bg-warning-100 text-warning-800 dark:bg-warning-900 dark:text-warning-200":"out-of-stock"===e.status?"bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-200":"bg-info-100 text-info-800 dark:bg-info-900 dark:text-info-200"),children:["low-stock"===e.status&&"⚠️ Estoque abaixo do m\xednimo","out-of-stock"===e.status&&"\uD83D\uDEA8 Produto sem estoque","overstock"===e.status&&"\uD83D\uDCE6 Excesso de estoque"]})]},e.id))})})]})]})})}},76865:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},32489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[467,213,379,427,971,117,744],function(){return e(e.s=56861)}),_N_E=e.O()}]);