(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{40144:function(e,t,a){Promise.resolve().then(a.bind(a,41847))},41847:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(57437),i=a(2265),n=a(40521),r=a(48614),l=a(95252),o=a(70525),d=a(95805),c=a(44794),x=a(90740),m=a(82431),u=a(92735),p=a(69410),h=a(94583),g=a(82472),v=a(77086);let y=e=>fetch(e).then(e=>e.json());function b(){let[e,t]=(0,i.useState)({dateRange:{start:new Date(Date.now()-2592e6).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]},status:"all"}),[a,b]=(0,i.useState)(!1),[f,w]=(0,i.useState)(!1),j=new URLSearchParams(e).toString(),{data:k,error:N,mutate:E}=(0,v.ZP)("/api/cepalab/vendas".concat(j?"?".concat(j):""),y,{refreshInterval:f?3e4:0}),{data:C}=(0,v.ZP)("/api/cepalab/vendas/summary",y);(0,i.useEffect)(()=>{E()},[e,E]);let S=e=>{if(!k)return;let t=k.map(e=>({"N\xfamero da Venda":e.numero_venda,Data:new Date(e.data_venda).toLocaleDateString("pt-BR"),Cliente:e.cliente_nome,Vendedor:e.vendedor_nome,"Valor Total":e.valor_total,Status:e.status,"Forma de Pagamento":e.forma_pagamento,Parcelas:e.parcelas}));g.$.export(t,e,"vendas_report")},V=e=>{switch(e.toLowerCase()){case"conclu\xedda":case"finalizada":return"success";case"pendente":return"warning";case"cancelada":return"danger";default:return"default"}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Gest\xe3o de Vendas"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-300",children:"Acompanhe e gerencie suas vendas com filtros avan\xe7ados e an\xe1lises em tempo real"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)(h.lE,{icon:(0,s.jsx)(l.Z,{className:"w-6 h-6"}),title:"Total de Vendas",value:(null==C?void 0:C.total_vendas)||0,subtitle:"no per\xedodo",change:{value:12.5,trend:"up"},variant:"info",loading:!C,children:(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quantidade de vendas"})}),(0,s.jsx)(h.lE,{icon:(0,s.jsx)(o.Z,{className:"w-6 h-6"}),title:"Valor Total",value:"R$ ".concat(((null==C?void 0:C.total_valor)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})),subtitle:"soma no per\xedodo",change:{value:8.3,trend:"up"},variant:"success",loading:!C,children:(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receita total"})}),(0,s.jsx)(h.lE,{icon:(0,s.jsx)(d.Z,{className:"w-6 h-6"}),title:"Clientes Atendidos",value:(null==C?void 0:C.total_clientes)||0,subtitle:"no per\xedodo",change:{value:5.2,trend:"up"},variant:"info",loading:!C,children:(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Atendimento realizado"})}),(0,s.jsx)(h.lE,{icon:(0,s.jsx)(c.Z,{className:"w-6 h-6"}),title:"Ticket M\xe9dio",value:"R$ ".concat(((null==C?void 0:C.media_valor)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})),subtitle:"por venda",change:{value:-2.1,trend:"down"},variant:"warning",loading:!C,children:(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valor m\xe9dio por pedido"})})]}),(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)("button",{onClick:()=>b(!a),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4"}),"Filtros"]}),(0,s.jsxs)("button",{onClick:()=>E(),className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4"}),"Atualizar"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"autoRefresh",checked:f,onChange:e=>w(e.target.checked),className:"rounded border-slate-300"}),(0,s.jsx)("label",{htmlFor:"autoRefresh",className:"text-sm text-slate-600 dark:text-slate-300",children:"Atualiza\xe7\xe3o autom\xe1tica (30s)"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>S("csv"),className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),"CSV"]}),(0,s.jsxs)("button",{onClick:()=>S("excel"),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),"Excel"]}),(0,s.jsxs)("button",{onClick:()=>S("pdf"),className:"flex items-center gap-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),"PDF"]})]})]}),(0,s.jsx)(r.M,{children:a&&(0,s.jsx)(n.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"mt-6",children:(0,s.jsx)(p.u,{onFilterChange:a=>{var s;return t({...e,...a,status:null!==(s=a.status)&&void 0!==s?s:"all"})},initialFilters:e})})})]}),(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:(0,s.jsx)("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Vendas Recentes"})}),N&&(0,s.jsxs)("div",{className:"p-6 text-center text-red-600 dark:text-red-400",children:["Erro ao carregar vendas: ",N.message]}),!k&&!N&&(0,s.jsx)("div",{className:"p-6 text-center text-slate-500 dark:text-slate-400",children:"Carregando vendas..."}),k&&(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[(0,s.jsx)("thead",{className:"bg-slate-50 dark:bg-slate-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"N\xfamero"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Data"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Cliente"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Vendedor"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Valor Total"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Pagamento"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:k.map((e,t)=>(0,s.jsxs)(n.E.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-white",children:e.numero_venda}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(e.data_venda).toLocaleDateString("pt-BR")}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:e.cliente_nome}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:e.vendedor_nome}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-white",children:["R$ ",e.valor_total.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("success"===V(e.status)?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"warning"===V(e.status)?"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100":"danger"===V(e.status)?"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-100"),children:e.status})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[e.forma_pagamento," ",e.parcelas>1&&"(".concat(e.parcelas,"x)")]})]},e.id))})]})})]})]})})}},94583:function(e,t,a){"use strict";a.d(t,{lE:function(){return l},sJ:function(){return o}});var s=a(57437),i=a(40521),n=a(48614),r=a(94508);function l(e){let{children:t,className:a,variant:l="default",icon:o,title:d,subtitle:c,value:x,change:m,loading:u=!1,onClick:p,glow:h=!1,animationDelay:g=0}=e;return(0,s.jsx)(n.M,{mode:"wait",children:(0,s.jsxs)(i.E.div,{variants:{hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,delay:g,ease:"easeOut"}},hover:{scale:1.02,y:-4,transition:{duration:.2,ease:"easeOut"}}},initial:"hidden",animate:"visible",whileHover:p?"hover":void 0,className:(0,r.cn)("relative p-6 rounded-xl border-2 transition-all duration-300 overflow-hidden","hover:shadow-xl",{default:"bg-white border-gray-200 text-gray-900",success:"bg-success-50 border-success-200 text-success-900",warning:"bg-warning-50 border-warning-200 text-warning-900",danger:"bg-danger-50 border-danger-200 text-danger-900",info:"bg-info-50 border-info-200 text-info-900"}[l],h&&({default:"hover:shadow-lg hover:shadow-primary/20",success:"hover:shadow-lg hover:shadow-success/20",warning:"hover:shadow-lg hover:shadow-warning/20",danger:"hover:shadow-lg hover:shadow-danger/20",info:"hover:shadow-lg hover:shadow-info/20"})[l],p&&"cursor-pointer",a),onClick:p,children:[h&&(0,s.jsx)(i.E.div,{className:(0,r.cn)("absolute inset-0 opacity-0 transition-opacity duration-300","bg-gradient-to-r from-transparent via-white/30 to-transparent"),whileHover:{opacity:1}}),u&&(0,s.jsx)(i.E.div,{variants:{animate:{backgroundPosition:["-200px 0","200px 0"],transition:{duration:1.5,repeat:1/0,ease:"linear"}}},animate:"animate",className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/50 to-transparent opacity-30",style:{backgroundSize:"200px 100%",backgroundRepeat:"no-repeat"}}),(0,s.jsxs)("div",{className:"relative z-10",children:[(o||d)&&(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[o&&(0,s.jsx)(i.E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:g+.1,duration:.3},className:(0,r.cn)("p-2 rounded-lg","default"===l&&"bg-gray-100 text-gray-600","success"===l&&"bg-success-100 text-success-600","warning"===l&&"bg-warning-100 text-warning-600","danger"===l&&"bg-danger-100 text-danger-600","info"===l&&"bg-info-100 text-info-600"),children:o}),d&&(0,s.jsx)(i.E.h3,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g+.2,duration:.3},className:"text-sm font-medium text-gray-600",children:d})]}),m&&(0,s.jsx)(e=>{let{trend:t,value:a}=e;return(0,s.jsxs)(i.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:(0,r.cn)("flex items-center gap-1 text-sm font-medium",{up:"text-success",down:"text-danger",neutral:"text-gray-500"}[t]),children:[(0,s.jsx)(i.E.span,{animate:{rotate:"up"===t?0:"down"===t?180:90},transition:{duration:.3},children:{up:"↑",down:"↓",neutral:"→"}[t]}),(0,s.jsxs)("span",{children:[Math.abs(a),"%"]})]})},{trend:m.trend,value:m.value})]}),u?(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]}),{}):(0,s.jsxs)(s.Fragment,{children:[void 0!==x&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g+.3,duration:.4},className:"mb-2",children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:"number"==typeof x?x.toLocaleString("pt-BR"):x}),c&&(0,s.jsx)(i.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:g+.4},className:"text-sm text-gray-500 mt-1",children:c})]}),t&&(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:g+.5,duration:.3},children:t})]})]}),p&&(0,s.jsx)(i.E.div,{className:"absolute inset-0 bg-white/20 opacity-0",whileTap:{opacity:1,scale:.95},transition:{duration:.1}})]})})}function o(e){let{children:t,className:a,staggerDelay:n=.1}=e;return(0,s.jsx)(i.E.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:n}}},className:(0,r.cn)("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",a),children:t})}},82472:function(e,t,a){"use strict";a.d(t,{$:function(){return s}});class s{static export(e,t,a){switch(t){case"csv":default:i.toCSV(e,a);break;case"json":i.toJSON(e,a);break;case"pdf":i.toPDF(e,a);break;case"excel":i.toExcel(e,a)}}static exportData(e,t){this.export(e,t.format,t.filename.replace(/\.[^/.]+$/,""))}static prepareSalesData(e,t){var a;return(null==e?void 0:null===(a=e.monthlyData)||void 0===a?void 0:a.map(e=>({Mês:e.month,Vendas:e.sales,Pedidos:e.orders,Ticket_Médio:e.avgTicket})))||[]}static prepareStockData(e){return(null==e?void 0:e.summary)?[{Categoria:"Total Dispon\xedvel",Valor:e.summary.total_disponivel},{Categoria:"Produtos",Valor:e.summary.produtos},{Categoria:"Valor Total",Valor:e.summary.valor_total}]:[]}static prepareFinancialData(e){var t,a,s,i;return(null==e?void 0:e.overdue)?[{Tipo:"Contas Vencidas",Valor:e.overdue.total,Quantidade:e.overdue.qtd},{Tipo:"Contas a Pagar",Valor:(null===(t=e.payable)||void 0===t?void 0:t.total)||0,Quantidade:(null===(a=e.payable)||void 0===a?void 0:a.qtd)||0},{Tipo:"Contas a Receber",Valor:(null===(s=e.receivable)||void 0===s?void 0:s.total)||0,Quantidade:(null===(i=e.receivable)||void 0===i?void 0:i.qtd)||0}]:[]}}class i{static toCSV(e,t){if(!e||0===e.length)return;let a=new Blob([[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download="".concat(t,".csv"),i.click(),URL.revokeObjectURL(s)}static toJSON(e,t){let a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download="".concat(t,".json"),i.click(),URL.revokeObjectURL(s)}static toPDF(e,t){console.warn("PDF export not implemented yet, falling back to CSV"),this.toCSV(e,t)}static toExcel(e,t){console.warn("Excel export not implemented yet, falling back to CSV"),this.toCSV(e,t)}}},94508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(61994),i=a(53335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.m6)((0,s.W)(t))}},40875:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},44794:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},70525:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},95805:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},32489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[467,213,379,410,971,117,744],function(){return e(e.s=40144)}),_N_E=e.O()}]);