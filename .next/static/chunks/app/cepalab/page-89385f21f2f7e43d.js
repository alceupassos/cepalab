(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{13259:function(e,s,t){Promise.resolve().then(t.bind(t,11835))},11835:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n},dynamic:function(){return o}});var a=t(57437),r=t(2265);function n(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(""),[o,c]=(0,r.useState)([]),[l,d]=(0,r.useState)(null);async function i(e){d(e),c([]);let s=await fetch("/api/sgq/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({schema:e.schema_name,object:e.object_name,top:100,server:void 0,port:void 0,user:void 0,password:void 0,database:void 0})});c((await s.json()).rows||[])}(0,r.useEffect)(()=>{(async()=>{let e=await fetch("/api/sgq/list");s((await e.json()).objects||[])})()},[]);let m=e.filter(e=>(e.schema_name+"."+e.object_name+" "+e.object_type).toLowerCase().includes(t.toLowerCase()));return(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold glow-orange",children:"Sistema CEPALAB (SGQ)"}),(0,a.jsx)("input",{className:"rounded-xl bg-transparent border border-white/10 px-3 py-2 w-full",placeholder:"Buscar por schema/objeto",value:t,onChange:e=>n(e.target.value)}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"neu-card rounded-2xl p-4",children:[(0,a.jsx)("div",{className:"text-sm font-semibold glow-orange mb-2",children:"Objetos"}),(0,a.jsx)("ul",{className:"text-xs space-y-1 max-h-80 overflow-auto",children:m.map((e,s)=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>i(e),className:"text-left w-full px-2 py-1 rounded hover:bg-white/5",children:[(0,a.jsx)("span",{className:"text-[#ff8a1f] mr-2",children:e.object_type})," ",e.schema_name,".",e.object_name]})},s))})]}),(0,a.jsxs)("div",{className:"neu-card rounded-2xl p-4",children:[(0,a.jsx)("div",{className:"text-sm font-semibold glow-orange mb-2",children:"Pr\xe9via (TOP 100)"}),l?(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsxs)("div",{className:"mb-2 text-muted-foreground",children:[l.schema_name,".",l.object_name]}),(0,a.jsx)("div",{className:"overflow-auto max-h-80 border border-white/10 rounded",children:(0,a.jsxs)("table",{className:"min-w-full text-[11px]",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:o[0]&&Object.keys(o[0]).map(e=>(0,a.jsx)("th",{className:"px-2 py-1 text-left border-b border-white/10",children:e},e))})}),(0,a.jsx)("tbody",{children:o.map((e,s)=>(0,a.jsx)("tr",{children:Object.keys(o[0]||{}).map(s=>(0,a.jsx)("td",{className:"px-2 py-1 border-b border-white/5",children:String(e[s])},s))},s))})]})})]}):(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Selecione um objeto para ver a pr\xe9via."})]})]})]})}let o="force-dynamic"}},function(e){e.O(0,[971,117,744],function(){return e(e.s=13259)}),_N_E=e.O()}]);