"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{69410:function(e,a,t){t.d(a,{u:function(){return p}});var l=t(57437),s=t(2265),r=t(40521),n=t(48614),i=t(90740),o=t(40875),c=t(32489),d=t(31047);let m=(0,t(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var x=t(70525),u=t(95252),g=t(94508);function p(e){let{onFilterChange:a,initialFilters:t}=e,[p,h]=(0,s.useState)(!1),[b,y]=(0,s.useState)({dateRange:{start:new Date(Date.now()-2592e6).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]},status:"all",...t}),[v,f]=(0,s.useState)([]),[j,w]=(0,s.useState)([]);(0,s.useEffect)(()=>{N(),k()},[]);let N=async()=>{try{var e;let a=await fetch("/api/cepalab/sales"),t=await a.json(),l=[...new Set((null===(e=t.bySeller)||void 0===e?void 0:e.map(e=>String(e.vendedor)))||[])];f(l)}catch(e){console.error("Error fetching vendedores:",e)}},k=async()=>{try{var e;let a=await fetch("/api/cepalab/sales"),t=await a.json(),l=[...new Set((null===(e=t.topClients)||void 0===e?void 0:e.map(e=>String(e.cliente)))||[])];w(l.slice(0,20))}catch(e){console.error("Error fetching clientes:",e)}},C=(e,t)=>{let l={...b,[e]:t};y(l),a(l)},S=(e,a)=>{C("dateRange",{...b.dateRange,[e]:a})},E=Object.entries(b).filter(e=>{let[a,t]=e;return"dateRange"!==a&&("status"===a?"all"!==t:void 0!==t&&""!==t)}).length;return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)(r.E.button,{onClick:()=>h(!p),className:(0,g.cn)("flex items-center gap-2 px-4 py-2 rounded-lg border transition-all duration-200","bg-white hover:bg-gray-50 border-gray-200 hover:border-gray-300","shadow-sm hover:shadow-md"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,l.jsx)(i.Z,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"font-medium",children:"Filtros"}),E>0&&(0,l.jsx)(r.E.span,{initial:{scale:0},animate:{scale:1},className:"bg-primary text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:E}),(0,l.jsx)(o.Z,{className:(0,g.cn)("w-4 h-4 transition-transform",p&&"rotate-180")})]}),(0,l.jsx)(n.M,{children:p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-20 z-40",onClick:()=>h(!1)}),(0,l.jsx)(r.E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute top-full left-0 mt-2 w-96 bg-white rounded-xl shadow-xl border border-gray-200 z-50 overflow-hidden",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros de Vendas"}),(0,l.jsx)("button",{onClick:()=>h(!1),className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:(0,l.jsx)(c.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-3",children:[(0,l.jsx)(d.Z,{className:"w-4 h-4"}),"Per\xedodo"]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Data Inicial"}),(0,l.jsx)("input",{type:"date",value:b.dateRange.start,onChange:e=>S("start",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Data Final"}),(0,l.jsx)("input",{type:"date",value:b.dateRange.end,onChange:e=>S("end",e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-3",children:[(0,l.jsx)(m,{className:"w-4 h-4"}),"Vendedor"]}),(0,l.jsxs)("select",{value:b.vendedor||"",onChange:e=>C("vendedor",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[(0,l.jsx)("option",{value:"",children:"Todos os vendedores"}),v.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-3",children:[(0,l.jsx)(x.Z,{className:"w-4 h-4"}),"Cliente"]}),(0,l.jsxs)("select",{value:b.cliente||"",onChange:e=>C("cliente",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[(0,l.jsx)("option",{value:"",children:"Todos os clientes"}),j.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-3",children:[(0,l.jsx)(u.Z,{className:"w-4 h-4"}),"Valor da Venda"]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"M\xednimo"}),(0,l.jsx)("input",{type:"number",placeholder:"0,00",value:b.minValue||"",onChange:e=>C("minValue",e.target.value?parseFloat(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"M\xe1ximo"}),(0,l.jsx)("input",{type:"number",placeholder:"999999,99",value:b.maxValue||"",onChange:e=>C("maxValue",e.target.value?parseFloat(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Status"}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{value:"all",label:"Todos"},{value:"completed",label:"Conclu\xeddo"},{value:"pending",label:"Pendente"},{value:"cancelled",label:"Cancelado"}].map(e=>(0,l.jsx)(r.E.button,{onClick:()=>C("status",e.value),className:(0,g.cn)("px-3 py-2 rounded-lg border text-sm font-medium transition-all",b.status===e.value?"bg-primary text-white border-primary":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"),whileHover:{scale:1.02},whileTap:{scale:.98},children:e.label},e.value))})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(r.E.button,{onClick:()=>{let e={dateRange:{start:new Date(Date.now()-2592e6).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]},status:"all"};y(e),a(e)},className:"flex-1 px-4 py-2 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Limpar"}),(0,l.jsx)(r.E.button,{onClick:()=>h(!1),className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Aplicar"})]})]})})]})})]})}},31047:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])}}]);