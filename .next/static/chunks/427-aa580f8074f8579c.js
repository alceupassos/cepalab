"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{94583:function(e,a,t){t.d(a,{lE:function(){return o},sJ:function(){return l}});var r=t(57437),s=t(40521),i=t(48614),n=t(94508);function o(e){let{children:a,className:t,variant:o="default",icon:l,title:c,subtitle:d,value:u,change:m,loading:x=!1,onClick:p,glow:g=!1,animationDelay:h=0}=e;return(0,r.jsx)(i.M,{mode:"wait",children:(0,r.jsxs)(s.E.div,{variants:{hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,delay:h,ease:"easeOut"}},hover:{scale:1.02,y:-4,transition:{duration:.2,ease:"easeOut"}}},initial:"hidden",animate:"visible",whileHover:p?"hover":void 0,className:(0,n.cn)("relative p-6 rounded-xl border-2 transition-all duration-300 overflow-hidden","hover:shadow-xl",{default:"bg-white border-gray-200 text-gray-900",success:"bg-success-50 border-success-200 text-success-900",warning:"bg-warning-50 border-warning-200 text-warning-900",danger:"bg-danger-50 border-danger-200 text-danger-900",info:"bg-info-50 border-info-200 text-info-900"}[o],g&&({default:"hover:shadow-lg hover:shadow-primary/20",success:"hover:shadow-lg hover:shadow-success/20",warning:"hover:shadow-lg hover:shadow-warning/20",danger:"hover:shadow-lg hover:shadow-danger/20",info:"hover:shadow-lg hover:shadow-info/20"})[o],p&&"cursor-pointer",t),onClick:p,children:[g&&(0,r.jsx)(s.E.div,{className:(0,n.cn)("absolute inset-0 opacity-0 transition-opacity duration-300","bg-gradient-to-r from-transparent via-white/30 to-transparent"),whileHover:{opacity:1}}),x&&(0,r.jsx)(s.E.div,{variants:{animate:{backgroundPosition:["-200px 0","200px 0"],transition:{duration:1.5,repeat:1/0,ease:"linear"}}},animate:"animate",className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/50 to-transparent opacity-30",style:{backgroundSize:"200px 100%",backgroundRepeat:"no-repeat"}}),(0,r.jsxs)("div",{className:"relative z-10",children:[(l||c)&&(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[l&&(0,r.jsx)(s.E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:h+.1,duration:.3},className:(0,n.cn)("p-2 rounded-lg","default"===o&&"bg-gray-100 text-gray-600","success"===o&&"bg-success-100 text-success-600","warning"===o&&"bg-warning-100 text-warning-600","danger"===o&&"bg-danger-100 text-danger-600","info"===o&&"bg-info-100 text-info-600"),children:l}),c&&(0,r.jsx)(s.E.h3,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h+.2,duration:.3},className:"text-sm font-medium text-gray-600",children:c})]}),m&&(0,r.jsx)(e=>{let{trend:a,value:t}=e;return(0,r.jsxs)(s.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:(0,n.cn)("flex items-center gap-1 text-sm font-medium",{up:"text-success",down:"text-danger",neutral:"text-gray-500"}[a]),children:[(0,r.jsx)(s.E.span,{animate:{rotate:"up"===a?0:"down"===a?180:90},transition:{duration:.3},children:{up:"↑",down:"↓",neutral:"→"}[a]}),(0,r.jsxs)("span",{children:[Math.abs(t),"%"]})]})},{trend:m.trend,value:m.value})]}),x?(0,r.jsx)(()=>(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]}),{}):(0,r.jsxs)(r.Fragment,{children:[void 0!==u&&(0,r.jsxs)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h+.3,duration:.4},className:"mb-2",children:[(0,r.jsx)("div",{className:"text-3xl font-bold",children:"number"==typeof u?u.toLocaleString("pt-BR"):u}),d&&(0,r.jsx)(s.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:h+.4},className:"text-sm text-gray-500 mt-1",children:d})]}),a&&(0,r.jsx)(s.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:h+.5,duration:.3},children:a})]})]}),p&&(0,r.jsx)(s.E.div,{className:"absolute inset-0 bg-white/20 opacity-0",whileTap:{opacity:1,scale:.95},transition:{duration:.1}})]})})}function l(e){let{children:a,className:t,staggerDelay:i=.1}=e;return(0,r.jsx)(s.E.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:i}}},className:(0,n.cn)("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",t),children:a})}},69240:function(e,a,t){t.d(a,{w:function(){return g}});var r=t(57437),s=t(2265),i=t(40521),n=t(48614),o=t(3085),l=t(76865),c=t(28124),d=t(44794),u=t(90740),m=t(40875),x=t(32489),p=t(94508);function g(e){let{onFilterChange:a,initialFilters:t}=e,[g,h]=(0,s.useState)(!1),[v,b]=(0,s.useState)({status:"all",sortBy:"name",sortOrder:"asc",...t}),[y,f]=(0,s.useState)([]),[j,w]=(0,s.useState)([]),[N,k]=(0,s.useState)([]);(0,s.useEffect)(()=>{E(),C(),S()},[]);let E=async()=>{try{var e;let a=await fetch("/api/cepalab/stock"),t=await a.json(),r=[...new Set((null===(e=t.products)||void 0===e?void 0:e.map(e=>String(e.categoria)))||[])];f(r.filter(Boolean))}catch(e){console.error("Error fetching categorias:",e)}},C=async()=>{try{var e;let a=await fetch("/api/cepalab/stock"),t=await a.json(),r=[...new Set((null===(e=t.products)||void 0===e?void 0:e.map(e=>String(e.fornecedor)))||[])];w(r.filter(Boolean))}catch(e){console.error("Error fetching fornecedores:",e)}},S=async()=>{try{var e;let a=await fetch("/api/cepalab/stock"),t=await a.json(),r=[...new Set((null===(e=t.products)||void 0===e?void 0:e.map(e=>String(e.localizacao)))||[])];k(r.filter(Boolean))}catch(e){console.error("Error fetching localizacoes:",e)}},O=(e,t)=>{let r={...v,[e]:t};b(r),a(r)},V=Object.entries(v).filter(e=>{let[a,t]=e;return"sortBy"!==a&&"sortOrder"!==a&&("status"===a?"all"!==t:void 0!==t&&""!==t)}).length;return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)(i.E.button,{onClick:()=>h(!g),className:(0,p.cn)("flex items-center gap-2 px-4 py-2 rounded-lg border transition-all duration-200","bg-white hover:bg-gray-50 border-gray-200 hover:border-gray-300","shadow-sm hover:shadow-md"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"font-medium",children:"Filtros"}),V>0&&(0,r.jsx)(i.E.span,{initial:{scale:0},animate:{scale:1},className:"bg-primary text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:V}),(0,r.jsx)(m.Z,{className:(0,p.cn)("w-4 h-4 transition-transform",g&&"rotate-180")})]}),(0,r.jsx)(n.M,{children:g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-20 z-40",onClick:()=>h(!1)}),(0,r.jsx)(i.E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute top-full left-0 mt-2 w-96 bg-white rounded-xl shadow-xl border border-gray-200 z-50 overflow-hidden",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros de Estoque"}),(0,r.jsx)("button",{onClick:()=>h(!1),className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)(x.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-3",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4"}),"Situa\xe7\xe3o do Estoque"]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{value:"all",label:"Todos",icon:(0,r.jsx)(d.Z,{className:"w-4 h-4"})},{value:"low-stock",label:"Baixo",icon:(0,r.jsx)(o.Z,{className:"w-4 h-4 text-warning"})},{value:"out-of-stock",label:"Zerado",icon:(0,r.jsx)(l.Z,{className:"w-4 h-4 text-danger"})},{value:"overstock",label:"Excesso",icon:(0,r.jsx)(c.Z,{className:"w-4 h-4 text-info"})}].map(e=>(0,r.jsxs)(i.E.button,{onClick:()=>O("status",e.value),className:(0,p.cn)("flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium transition-all",v.status===e.value?"bg-primary text-white border-primary":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.icon,e.label]},e.value))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Categoria"}),(0,r.jsxs)("select",{value:v.categoria||"",onChange:e=>O("categoria",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[(0,r.jsx)("option",{value:"",children:"Todas as categorias"}),y.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Fornecedor"}),(0,r.jsxs)("select",{value:v.fornecedor||"",onChange:e=>O("fornecedor",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[(0,r.jsx)("option",{value:"",children:"Todos os fornecedores"}),j.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Localiza\xe7\xe3o"}),(0,r.jsxs)("select",{value:v.localizacao||"",onChange:e=>O("localizacao",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[(0,r.jsx)("option",{value:"",children:"Todas as localiza\xe7\xf5es"}),N.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quantidade em Estoque"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"M\xednima"}),(0,r.jsx)("input",{type:"number",placeholder:"0",value:v.minQuantity||"",onChange:e=>O("minQuantity",e.target.value?parseFloat(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"M\xe1xima"}),(0,r.jsx)("input",{type:"number",placeholder:"999999",value:v.maxQuantity||"",onChange:e=>O("maxQuantity",e.target.value?parseFloat(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Valor Total em Estoque"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"M\xednimo"}),(0,r.jsx)("input",{type:"number",placeholder:"0,00",step:"0.01",value:v.minValue||"",onChange:e=>O("minValue",e.target.value?parseFloat(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"M\xe1ximo"}),(0,r.jsx)("input",{type:"number",placeholder:"999999,99",step:"0.01",value:v.maxValue||"",onChange:e=>O("maxValue",e.target.value?parseFloat(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Ordenar por"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("select",{value:v.sortBy,onChange:e=>O("sortBy",e.target.value),className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[(0,r.jsx)("option",{value:"name",children:"Nome"}),(0,r.jsx)("option",{value:"quantity",children:"Quantidade"}),(0,r.jsx)("option",{value:"value",children:"Valor"}),(0,r.jsx)("option",{value:"category",children:"Categoria"})]}),(0,r.jsx)(i.E.button,{onClick:()=>O("sortOrder","asc"===v.sortOrder?"desc":"asc"),className:(0,p.cn)("px-3 py-2 border border-gray-200 rounded-lg transition-all","hover:bg-gray-50 focus:ring-2 focus:ring-primary focus:border-transparent"),whileHover:{scale:1.02},whileTap:{scale:.98},title:"asc"===v.sortOrder?"Ordem Crescente":"Ordem Decrescente",children:(0,r.jsx)(i.E.div,{animate:{rotate:"desc"===v.sortOrder?180:0},transition:{duration:.2},children:"↓"})})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(i.E.button,{onClick:()=>{let e={status:"all",sortBy:"name",sortOrder:"asc"};b(e),a(e)},className:"flex-1 px-4 py-2 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Limpar"}),(0,r.jsx)(i.E.button,{onClick:()=>h(!1),className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Aplicar"})]})]})})]})})]})}},82472:function(e,a,t){t.d(a,{$:function(){return r}});class r{static export(e,a,t){switch(a){case"csv":default:s.toCSV(e,t);break;case"json":s.toJSON(e,t);break;case"pdf":s.toPDF(e,t);break;case"excel":s.toExcel(e,t)}}static exportData(e,a){this.export(e,a.format,a.filename.replace(/\.[^/.]+$/,""))}static prepareSalesData(e,a){var t;return(null==e?void 0:null===(t=e.monthlyData)||void 0===t?void 0:t.map(e=>({Mês:e.month,Vendas:e.sales,Pedidos:e.orders,Ticket_Médio:e.avgTicket})))||[]}static prepareStockData(e){return(null==e?void 0:e.summary)?[{Categoria:"Total Dispon\xedvel",Valor:e.summary.total_disponivel},{Categoria:"Produtos",Valor:e.summary.produtos},{Categoria:"Valor Total",Valor:e.summary.valor_total}]:[]}static prepareFinancialData(e){var a,t,r,s;return(null==e?void 0:e.overdue)?[{Tipo:"Contas Vencidas",Valor:e.overdue.total,Quantidade:e.overdue.qtd},{Tipo:"Contas a Pagar",Valor:(null===(a=e.payable)||void 0===a?void 0:a.total)||0,Quantidade:(null===(t=e.payable)||void 0===t?void 0:t.qtd)||0},{Tipo:"Contas a Receber",Valor:(null===(r=e.receivable)||void 0===r?void 0:r.total)||0,Quantidade:(null===(s=e.receivable)||void 0===s?void 0:s.qtd)||0}]:[]}}class s{static toCSV(e,a){if(!e||0===e.length)return;let t=new Blob([[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n")],{type:"text/csv"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="".concat(a,".csv"),s.click(),URL.revokeObjectURL(r)}static toJSON(e,a){let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="".concat(a,".json"),s.click(),URL.revokeObjectURL(r)}static toPDF(e,a){console.warn("PDF export not implemented yet, falling back to CSV"),this.toCSV(e,a)}static toExcel(e,a){console.warn("Excel export not implemented yet, falling back to CSV"),this.toCSV(e,a)}}},94508:function(e,a,t){t.d(a,{cn:function(){return i}});var r=t(61994),s=t(53335);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.m6)((0,r.W)(a))}},40875:function(e,a,t){t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},28124:function(e,a,t){t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]])},44794:function(e,a,t){t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},3085:function(e,a,t){t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])}}]);